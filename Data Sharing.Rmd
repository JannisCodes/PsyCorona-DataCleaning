---
title: "Psycorona - Data Sharinh"
subtitle: "Step by step description" 
author: "PsyCorona Gang"
date: "3/30/2020"
output:
  html_document: 
    code_folding: hide
    mathjax: default
    theme: yeti
    toc: yes
    toc_float: yes
editor_options:
  chunk_output_type: console
---


<style type="text/css">
.main-container {
  max-width: 1300px;
  margin-left: auto;
  margin-right: auto;
}
.table {
  margin-left:auto; 
  margin-right:auto;
}
</style>


```{r setup, include=FALSE}
# R Studio Clean-Up
  cat("\014") # clear console
  rm(list=ls()) # clear workspace
  gc # garbage collector
  
# Install and Load Packages
  #if(!require(pacman)) install.packages("pacman")
  # require(pacman)
  # pacman::p_load(psych, ggplot2, ggthemes, haven, data.table, dplyr, tidyr, Hmisc, mada, 
  #                knitr, kableExtra, naniar, stats, readxl, matrixStats, ISOcodes, pander,
  #                Scale)
lib <- c("psych", "ggplot2", "ggthemes", "haven", "data.table", "dplyr", "tidyr", "Hmisc", "mada", 
         "knitr", "kableExtra", "naniar", "stats", "readxl", "matrixStats", "ISOcodes", "pander", "Scale",
         "dply")

invisible(lapply(lib, library, character.only = TRUE))  
lapply(lib, library, character.only = TRUE)
rm(lib)  

# Load Custom Packages  
  source("./scripts/functions/fun.panel.R")
  source("./scripts/functions/themes.R")
  source("./scripts/functions/dictionary_functions.R")
  
# Markdown Options
  knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # set working directory
  knitr::opts_knit$get("root.dir") # check working directory
  options(scipen = 999, digits = 4, width = 400) #removes scientific quotation
  #knitr::opts_chunk$set(echo = TRUE, cache = F, cache.path = rprojroot::find_rstudio_root_file('cache/')) # cache settings
  knitr::knit_hooks$set(
   error = function(x, options) {
     paste('\n\n<div class="alert alert-danger">',
           gsub('##', '\n', gsub('^##\ Error', '**Error**', x)),
           '</div>', sep = '\n')
   },
   warning = function(x, options) {
     paste('\n\n<div class="alert alert-warning">',
           gsub('##', '\n', gsub('^##\ Warning:', '**Warning**', x)),
           '</div>', sep = '\n')
   },
   message = function(x, options) {
     paste('\n\n<div class="alert alert-info">',
           gsub('##', '\n', x),
           '</div>', sep = '\n')
   }
  )
  htmltools::tagList(rmarkdown::html_dependency_font_awesome())

# Global Chunk Options
  knitr::opts_chunk$set(echo = TRUE)
```

Note. Boxplots display the interquartile range (IQR, center box), and the whiskers extend 1.5*IQR from the lower and upper hinge. The white point indicates the mean and the white center line indicates the median.   

<br/>

## **Preparation**
In a first step we import the raw Qualtrics data, which was downloaded as an SPSS file.   
### Import Data
```{r LoadRawBase, echo=T, warning=F, message=F}
# Reset working directory to folder current file is saved in
#setwd(dirname(rstudioapi::getActiveDocumentContext()$path))

# Import Qualtrics Survey Data
  #dtClean <- read_spss("data/cleaned data/Psycorona Baseline cleaned 2020-04-24 11-22 CEST.sav")
  dtAll <- read_spss("data/cleaned data/Psycorona Baseline cleaned - All 2020-06-12 13-02 CEST.sav")
  dtAll$representative <- dtAll$source
  # recode source so not identifiable
    dtAll$source <- dplyr::recode(dtAll$source, "Fly" = 1, "HNATD" = 2, "Iran" = 3, "NYU-AD" = 4, "RUG" = 5, "Rep NYU-AD" = 6, "Rep RUG" = 7, "Rep China" = 8)
    table(dtAll$representative, dtAll$source) # for checking
  
# Import Request sheet
  #dtReq <- read.csv("data/cleaned data/request/Variable Justification - Sheet1.csv", header = T)
  url <- gsheet::construct_download_url('https://docs.google.com/spreadsheets/d/13PFXsmgjrZBNddHodR2Z_80cjicN4s7yd8BbazKffx8/edit?usp=sharing', format = "csv", sheetid = NULL)
  dtReq <- gsheet::gsheet2tbl(url, sheetid = NULL); rm(url)
  namedtReq <- dtReq[1,]
  dtReq <- dtReq[-c(1:3),]
  
```

### Function for Data
```{r fctExp, echo=T, warning=F, message=F}
stringOut <- NA #make var for fill out in function
nameOut <- function(df){
# if there is a B (baseline) paste the variable
  if (grepl("B|All",df[2], ignore.case = T)) {
    stringOut[1] = paste(df[1])
  } else {
    stringOut[1] = NA
  }
# if there is a W1 (baseline) paste w1 and the variable
  if (grepl("W1$|Wave1$|Wave 1$|All",df[2], ignore.case = T)) { # needs special care as it coincides with 10
    stringOut[2] = paste("w1_", df[1], sep = "")
  } else {
    stringOut[2] = NA
  }
  if (grepl("W2|Wave2|Wave 2|All",df[2], ignore.case = T)) {
    stringOut[3] = paste("w2_", df[1], sep = "")
  } else {
    stringOut[3] = NA
  }
  if (grepl("W3|Wave3|Wave 3|All",df[2], ignore.case = T)) {
    stringOut[4] = paste("w3_", df[1], sep = "")
  } else {
    stringOut[4] = NA
  }
  if (grepl("W4|Wave4|Wave 4|All",df[2], ignore.case = T)) {
    stringOut[5] = paste("w4_", df[1], sep = "")
  } else {
    stringOut[5] = NA
  }
  if (grepl("W5|Wave5|Wave 5|All",df[2], ignore.case = T)) {
    stringOut[6] = paste("w5_", df[1], sep = "")
  } else {
    stringOut[6] = NA
  }
  if (grepl("W6|Wave6|Wave 6|All",df[2], ignore.case = T)) {
    stringOut[7] = paste("w6_", df[1], sep = "")
  } else {
    stringOut[7] = NA
  }
  if (grepl("W7|Wave7|Wave 7|All",df[2], ignore.case = T)) {
    stringOut[8] = paste("w7_", df[1], sep = "")
  } else {
    stringOut[8] = NA
  }
  if (grepl("W8|Wave8|Wave 8|All",df[2], ignore.case = T)) {
    stringOut[9] = paste("w8_", df[1], sep = "")
  } else {
    stringOut[9] = NA
  }
  if (grepl("W9|Wave9|Wave 9|All",df[2], ignore.case = T)) {
    stringOut[10] = paste("w9_", df[1], sep = "")
  } else {
    stringOut[10] = NA
  }
  if (grepl("W10|Wave10|Wave 10|All",df[2], ignore.case = T)) {
    stringOut[11] = paste("w10_", df[1], sep = "")
  } else {
    stringOut[11] = NA
  }
return(stringOut)
}
# ADD WARNING IF ZIP CODE REQUESTED
```


The raw data set includes `r length(dt0Raw)` variables for `r nrow(dt0Raw)` cases.

### RMD00 (Bertus wants gender, age, country table)
```{r bertDemo}
tmp <- dtAll %>%
  group_by(coded_country, age, gender) %>%
  summarise(n = n())
write_sav(tmp, paste0("data/collab data/BertusDemo ", format(Sys.time(), format = "%F %H-%M %Z"),".sav"))
write.csv(tmp, paste0("data/collab data/BertusDemo ", format(Sys.time(), format = "%F %H-%M %Z"),".csv"))
rm(tmp)
```

### RMD01 (Representative Sample)
```{r RMD01, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD01'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)

# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 01)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD02 (Ben Guetzkow): \n Decision-Making during the COVID-19 Pandemic: Predicting Safe and Unsafe behaviors with the Corona Reflection Test
```{r RMD02, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD02'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 02)
    }

# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
  
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD03 (Caspar van Lissa): \n Cooperation, Trust, and Behavioral Responses Across Societies During the COVID-19 Pandemic
```{r RMD03, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD03'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)
  
# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 03)
    }

  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
  
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD04 (Qing Han): \n Trust in government and its influence on health behaviour and prosocial behaviour during the COVID-19 pandemic
```{r RMD04, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD04'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 04)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD05 (Anne Margit): \n Predictors of consistently high well-being during COVID-19
```{r RMD05, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD05'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 05)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```


### RMD06 (Anne Margit): \n Emotional experiences across nations during COVID-19: age, gender, and cultural differences
```{r RMD06, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD06'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 06)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD07 (Anne Margit): \n The association of emotional experiences during the height of COVID-19 with well-being across nations
```{r RMD07, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD07'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 07)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD08 (Lemay): \n Hope During the COVID-19 Pandemic: Implications for Individual and National Prevention Behaviors, Infection, and Well-Being
```{r RMD08, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD08'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 08)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD09 (Abakoumkin): \n Prediction of health protective behavior in the context of COVID-19 pandemic drawing from protection motivation theory
```{r RMD09, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD09'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 09)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD10 (Schumpe): \n Adoption of recommended behaviors to fight COVID-19
```{r RMD10, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD10'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 10)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD11 (Jin): \n Intergenerational Conflict of Interest and Prosocial Behavior During COVID-19 Pandemic
```{r RMD11, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD11'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 11)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD12 (Zuniga): \n Emotions, prosocial behaviour, wellbeing and disempowerment in response to the pandemic
```{r RMD12, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD12'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 12)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD13 (Lemay)
```{r RMD13, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD13'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 13)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD14 (Quing Han)
```{r RMD14, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD14'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 14)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD15 (Claudia Fernandes)
```{r RMD15, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD15'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 15)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD16 (van Breen)
```{r RMD16, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD16'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 16)
    }
  
  # make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD17 (Bagci)
```{r RMD17, echo=T, warning=F, message=F}
# prepare data frame
name <- 'RMD17'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 17)
    }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD18 (van Veen)
```{r RMD18, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD18'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 18)
  }
  
# this dataset only wants the Netherlands
  dt <- dt %>%
  filter(coded_country == "Netherlands") #this proposal only wants the netherlands
  
# prepare dataframe for merge
  postCodeNL <- read.csv("data/raw data/ZIP/NLpostcodetabel.csv", header = T)
  postCodeNL <- postCodeNL %>%
    transmute(mergeID = substr(PostCode, start = 1, stop = 4), #get only first five letters
              level1 = Provincie,
              level2 = Gemeente)
# remove duplicate postal codes from the postal database (we do not need to know their street)
  postCodeNL <- postCodeNL %>%
    dplyr::distinct(mergeID, .keep_all = T)

# make merge ID in the created df
  dt$mergeID <-dt$ZIP_1_TEXT %>%
    tolower() %>% #make them lower case
    gsub(" ", "", ., fixed = TRUE) %>% # remove white space
    as.character()%>%
    substr(., start = 1, stop = 4)
  
# and merge them 
  dt <- dplyr::left_join(dt, postCodeNL, by = "mergeID")
  
# remove ZIP again
  dt <- dt %>%
    dplyr::select(-contains("ZIP", ignore.case = T),
                  -ends_with("_TEXT", ignore.case = T),
                  -contains("mergeID", ignore.case = T))
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD19 (Buttrick)
```{r RMD19, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD19'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 19)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD20 (Agostini)
```{r RMD20, echo=T, warning=F, message=T}
# prepare dataframe
name <- 'RMD20'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  # dt$ResponseId <- c(1:nrow(dt))
  # for (i in 1:nrow(dt)) {
  # dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 20)
  # }
  
# only needed for var checking  
  tmp <- psych::describe(dt)
  View(tmp)
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }

# Export Dataframe
# Naming
  namSPSS <- paste0("../psyCorona-Analysis/data/raw data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("../psyCorona-Analysis/data/raw data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("../psyCorona-Analysis/data/raw data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD21 (Gomez)
```{r RMD21, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD21'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 21)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD22 (Erica)
```{r RMD22, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD22'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 22)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD23 (Hoon-Seok Choi)
```{r RMD23, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD23'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 23)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD24 (Erica)
```{r RMD24, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD24'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 24)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD25 (Lemay)
```{r RMD25, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD25'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 25)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD26 (Wollast)
```{r RMD26, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD26'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 26)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD27 (Douglas)
```{r RMD27, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD27'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 27)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD28 (Sutton)
```{r RMD28, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD28'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 28)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD29
```{r RMD29, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD29'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 29)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD30 (Caspar)
```{r RMD30, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD30'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 20)
    }

# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
  
# check whether hashIds work
   # dtCasper <- read_spss("data/collab data/RMD30_Caspar van Lissa_2020-05-17 11-46 CEST.sav")
    
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD31 (Pica)
```{r RMD31, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD31'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 31)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD32 (Elena Resta)
```{r RMD32, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD32'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 32)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD33 (Silvana Mula)
```{r RMD33, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD33'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 33)
  }  

# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD34 (van Dellen)
```{r RMD34, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD34'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% #  select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 34)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD35
```{r RMD35, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD35'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 35)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD36 (Michelle and William)
```{r RMD36, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD36'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 36)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD37 (Lindsy Richardson)
```{r RMD37, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD37'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 37)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD38 (Yasin Koc)
```{r RMD38, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD38'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 38)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD39
```{r RMD39, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD39'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 39)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD40 (Leslie Zwerwer)
```{r RMD40, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD40'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 40)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```

### RMD41
```{r RMD41, echo=T, warning=F, message=F}
# prepare dataframe
name <- 'RMD41'
# from here everything is automatic (just need to change the name above)
  author <- namedtReq %>%
    dplyr::select(one_of(paste0(name, '_vars'))) %>% # select the column in which the name and vars are
    as.character() # make it a character
  author <- strsplit(author, "\n")[[1]][3] # get the author which is the third occurence after \n

# make df  
  tmp <- dtReq %>% 
    dplyr::select(name = var, # get variable names
                  request = one_of(paste0(name, '_vars'))) # and the requested columns
 
  tmp <- tmp %>% #remove empty rows
    dplyr::filter(request != "") 
  
# run function to get requested variable names 
  varNames <- apply(tmp, 1, nameOut); rm(tmp)

# make dataframe
  dt <- dtAll %>%
    dplyr::select(one_of(as.character(varNames)),
                 -contains("_DO_"),
                 -contains(".c"),
                 -contains(".m"),
                 -contains(".z"),
                 -contains(".fa"),
                 -contains("ZIP", ignore.case = T),
                 -ends_with("_TEXT", ignore.case = T),
                 -countryCitizenIfNo,
                 -whatRel)
  
# needs response ID (make through digest)
  dt$ResponseId <- c(1:nrow(dt))
  for (i in 1:nrow(dt)) {
  dt$ResponseId[i] <- digest::digest(dtAll$ResponseId[i], algo = "xxhash32", seed = 41)
  }
  
# make representative if needed
  if(sum(grepl("representative", names(dt))) == 1 ){ # if the sum of columns that have the string representative == 2
    dt <- dt[grepl("Rep", dt$representative),]  # reduce df to representative
  } else { # if not
    dt <- dt # keep dt
  }
    
# Export Dataframe
# Naming
  namSPSS <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".sav")
  namR <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".Rdata")
  namCSV <- paste0("data/collab data/", name, "_", author, "_", format(Sys.time(), format = "%F %H-%M %Z"),".csv")
# Export
  write_sav(dt, namSPSS)
  save(dt, file = namR)
  write.csv(dt, file = namCSV)
rm(dt, namSPSS, namR, namCSV)
```